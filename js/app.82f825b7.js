(function(){"use strict";var t={3100:function(t,e,a){var n=a(3751),r=a(641);function o(t,e){const a=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.Wv)(a)}var s=a(6262);const i={},l=(0,s.A)(i,[["render",o]]);var u=l,c=a(33);const p={class:"container-fluid"},h={class:"row"},d={class:"col-12 col-md-3"},f={id:"app"},g={class:"table table-striped table-hover"},b=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,[(0,r.Lk)("strong",null,"Stt")]),(0,r.Lk)("th",null,[(0,r.Lk)("strong",null,"IP")]),(0,r.Lk)("th",null,[(0,r.Lk)("strong",null,"Data")]),(0,r.Lk)("th",null,[(0,r.Lk)("strong",null,"Time")])])],-1),k=(0,r.Lk)("button",null," Lưu",-1),m={class:"col-12 col-md-9"},v={key:0,class:"popup"};function L(t,e,a,n,o,s){const i=(0,r.g2)("line-chart");return(0,r.uX)(),(0,r.CE)("div",p,[(0,r.Lk)("div",h,[(0,r.Lk)("div",d,[(0,r.Lk)("div",f,[(0,r.Lk)("table",g,[b,(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(t.messages,((e,a)=>((0,r.uX)(),(0,r.CE)("tr",{key:a},[(0,r.Lk)("td",null,(0,c.v_)(a+=1),1),(0,r.Lk)("td",null,(0,c.v_)(e.ip),1),(0,r.Lk)("td",null,(0,c.v_)(e.message),1),(0,r.Lk)("td",null,(0,c.v_)(t.formattedTimestamp(e.timestamp)),1)])))),128))])])]),k]),(0,r.Lk)("div",m,[(0,r.bF)(i,{ref:"lineChart",data:t.chartData,options:t.chartOptions},null,8,["data","options"])])]),t.showPopup?((0,r.uX)(),(0,r.CE)("div",v,[(0,r.Lk)("p",null,"Bạn có muốn nhận dữ liệu từ IP "+(0,c.v_)(t.currentIp)+"?",1),(0,r.Lk)("button",{onClick:e[0]||(e[0]=(...e)=>t.acceptData&&t.acceptData(...e))},"Đồng ý"),(0,r.Lk)("button",{onClick:e[1]||(e[1]=(...e)=>t.rejectData&&t.rejectData(...e))},"Từ chối")])):(0,r.Q3)("",!0)])}a(4114);var C=a(6908),D=a(2022);D.t1.register(D.hE,D.m_,D.s$,D.No,D.FN,D.PP,D.kc);var w=(0,r.pM)({components:{LineChart:C.N1},data(){return{messages:[],acceptedIps:[],showPopup:!1,currentIp:"",pendingData:null,chartData:{labels:[],datasets:[{label:"Data 1",data:[],borderColor:"blue",backgroundColor:"rgba(0, 0, 255, 0.2)",fill:!1},{label:"Data 2",data:[],borderColor:"red",backgroundColor:"rgba(255, 0, 0, 0.2)",fill:!1},{label:"Data 3",data:[],borderColor:"green",backgroundColor:"rgba(0, 255, 0, 0.2)",fill:!1},{label:"Data 4",data:[],borderColor:"black",backgroundColor:"rgba(0, 0, 0, 0.2)",fill:!1}]},chartOptions:{responsive:!0,scales:{x:{title:{display:!0,text:"Minutes"}},y:{title:{display:!0,text:"Value"},min:0,max:100}}}}},mounted(){this.$nextTick((()=>{this.chart=this.$refs.lineChart.chart;const t=new WebSocket("ws://localhost:8081");t.onmessage=t=>{const e=JSON.parse(t.data);this.acceptedIps.includes(e.ip)?(this.messages.push(e),this.$nextTick((()=>{this.chart&&this.updateChart(e.message)}))):(this.currentIp=e.ip,this.pendingData=e,this.showPopup=!0)}}))},methods:{updateChart(t){const e=t.split("-").map(Number),a=new Date,n=Math.floor(a.getMinutes());if(!this.chart)return void console.error("Biểu đồ chưa sẵn sàng.");const r=JSON.parse(JSON.stringify(this.chart.data)),o=r.labels.indexOf(n);-1===o?(r.labels.push(n),r.datasets.forEach(((t,a)=>{t.data.push(e[a]||0)}))):r.datasets.forEach(((t,a)=>{t.data[o]=e[a]||0})),this.chart.data=r,this.chart.update()},acceptData(){this.acceptedIps.push(this.currentIp),this.messages.push(this.pendingData),this.updateChart(this.pendingData.message),this.clearPopup()},rejectData(){this.clearPopup()},clearPopup(){this.showPopup=!1,this.currentIp="",this.pendingData=null},formattedTimestamp(t){const e=new Date(t);return e.toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}}});const y=(0,s.A)(w,[["render",L]]);var O=y,P=a(5220);const x=[{path:"/",name:"home",component:O}],I=(0,P.aE)({history:(0,P.LA)("/testConnectUDP/"),routes:x});var E=I;(0,n.Ef)(u).use(E).mount("#app")}},e={};function a(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,a),o.exports}a.m=t,function(){var t=[];a.O=function(e,n,r,o){if(!n){var s=1/0;for(c=0;c<t.length;c++){n=t[c][0],r=t[c][1],o=t[c][2];for(var i=!0,l=0;l<n.length;l++)(!1&o||s>=o)&&Object.keys(a.O).every((function(t){return a.O[t](n[l])}))?n.splice(l--,1):(i=!1,o<s&&(s=o));if(i){t.splice(c--,1);var u=r();void 0!==u&&(e=u)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[n,r,o]}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var r,o,s=n[0],i=n[1],l=n[2],u=0;if(s.some((function(e){return 0!==t[e]}))){for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(l)var c=l(a)}for(e&&e(n);u<s.length;u++)o=s[u],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(c)},n=self["webpackChunkdemocline"]=self["webpackChunkdemocline"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(3100)}));n=a.O(n)})();
//# sourceMappingURL=app.82f825b7.js.map